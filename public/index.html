<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Sweet Lab - Ventas</title>
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet" />
	<link rel="stylesheet" href="/styles.css" />
	<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
	<header class="app-header">
		<div class="header-row">
			<img src="/logo.png" alt="Lulitas Logo" class="app-logo" />
			<h1>Sweet Lab - Registro de ventas</h1>
		</div>
	</header>

	<main id="app">
		<section id="view-select-seller" class="view">
			<div class="sellers-panel">
				<div class="panel-header">
					<h3>Vendedores activos</h3>
				</div>
				<div class="panel-body">
					<div id="seller-list" class="seller-list"></div>
					<div class="seller-add">
						<button id="add-seller" class="press-btn add-seller-wide">+ Agregar Nuevo Vendedor</button>
					</div>
				</div>
			</div>
			<div id="global-dates-section" class="dates-section">
				<div class="report-card">
					<div class="report-card-content">
						<h3 class="report-title">Gestión de reportes</h3>
						<p class="report-subtitle">Genera un informe consolidado por fecha</p>
						<button id="report-button" class="press-btn report-btn btn-primary">Crear reporte</button>
					</div>
				</div>
				<input id="report-date" type="date" class="hidden" />
			</div>
		</section>

		<section id="view-sales" class="view hidden">
			<div class="header-sticky">
				<div class="toolbar">
					<div class="toolbar-left">
						<img src="/logo.png" alt="Lulitas Logo" class="app-logo toolbar-logo" />
						<button id="go-home" class="secondary press-btn">Inicio</button>
					</div>
					<h2 id="current-seller"></h2>
					<button id="date-new" class="press-btn btn-primary">+ Nueva Fecha</button>
				</div>
			</div>

			<div id="dates-section" class="dates-section">
				<div class="dates-list" id="dates-list"></div>
				<input id="new-date" type="date" class="hidden" />
			</div>

			<div class="sales-panel">
				<div class="panel-header">
					<h3>Registro de Ventas de Postres</h3>
					<div class="panel-actions">
						<button id="add-row" class="press-btn btn-primary">+ Nueva venta</button>
						<button id="export-excel" class="excel-btn press-btn btn-gold">⤓ Exportar Excel</button>
					</div>
				</div>
				<div class="panel-body">
					<div class="table-wrapper hidden" id="sales-wrapper">
				<table id="sales-table">
					<colgroup>
						<col class="w-paid" />
						<col class="w-client" />
						<col class="w-qty" />
						<col class="w-qty" />
						<col class="w-qty" />
						<col class="w-qty" />
						<col class="w-total" />
						<col class="w-actions" />
					</colgroup>
					<thead>
						<tr>
							<th class="col-paid">$</th>
							<th class="col-client">Cliente</th>
							<th class="col-arco">Arco</th>
							<th class="col-melo">Melo</th>
							<th class="col-mara">Mara</th>
							<th class="col-oreo">Oreo</th>
							<th class="col-total">Total</th>
							<th class="col-actions"></th>
						</tr>
					</thead>
					<tbody id="sales-tbody"></tbody>
					<tfoot>
						<tr class="tfoot-qty">
							<td class="col-paid"></td>
							<td class="col-client label" rowspan="2">Totales</td>
							<td class="col-arco"><span id="sum-arco-qty">0</span></td>
							<td class="col-melo"><span id="sum-melo-qty">0</span></td>
							<td class="col-mara"><span id="sum-mara-qty">0</span></td>
							<td class="col-oreo"><span id="sum-oreo-qty">0</span></td>
							<td class="col-total"><span id="sum-total-qty"> </span></td>
							<td class="col-actions"></td>
						</tr>
						<tr class="tfoot-amt">
							<td class="col-paid"></td>
							<td class="col-arco"><span id="sum-arco-amt">0</span></td>
							<td class="col-melo"><span id="sum-melo-amt">0</span></td>
							<td class="col-mara"><span id="sum-mara-amt">0</span></td>
							<td class="col-oreo"><span id="sum-oreo-amt">0</span></td>
							<td class="col-total"><span id="sum-grand">0</span></td>
							<td class="col-actions"></td>
						</tr>
					</tfoot>
				</table>
				<div class="table-actions end">
					
				</div>
				<div class="table-actions end">
					<button id="add-row-bottom" class="press-btn btn-primary">+ Nueva Venta</button>
				</div>
			</div>
		</section>
	</main>

	<footer class="app-footer">
		<small>Datos sincronizados con Netlify + Neon</small>
	</footer>

	<script src="/app.js" type="module"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Sweet Lab - Ventas</title>
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet" />
	<link rel="stylesheet" href="/styles.css" />
	<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
	<header class="app-header">
		<div class="header-row">
			<div class="header-left">
				<img src="/logo.png" alt="Lulitas Logo" class="app-logo" />
				<h1>Sweet Lab - Registro de ventas</h1>
			</div>
			<div class="header-actions">
				<button id="theme-toggle" class="press-btn theme-toggle" title="Modo oscuro" aria-label="Cambiar tema"></button>
				<button id="notif-toggle" class="press-btn" title="Notificaciones" aria-label="Activar notificaciones">ðŸ””</button>
				<button id="logout-btn" class="press-btn" title="Cerrar sesiÃ³n" style="display:none">Salir</button>
			</div>
		</div>
	</header>

	<main id="app">
		<section id="view-login" class="view">
			<div class="sellers-panel">
				<div class="panel-header"><h3>Iniciar sesiÃ³n</h3></div>
				<div class="panel-body">
					<div class="login-form">
						<input id="login-user" type="text" placeholder="Usuario" class="input-cell" />
						<input id="login-pass" type="password" placeholder="ContraseÃ±a" class="input-cell" />
						<button id="login-btn" class="press-btn btn-primary">Entrar</button>
						<div id="login-error" class="login-error hidden"></div>
						<div class="login-actions">
							<button id="login-change-pass" class="press-btn secondary">Cambiar contraseÃ±a</button>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section id="view-select-seller" class="view">
			<div class="sellers-panel">
				<div class="panel-header">
					<h3>Vendedores activos</h3>
				</div>
				<div class="panel-body">
					<div id="seller-list" class="seller-list"></div>
					<div class="seller-add">
						<button id="add-seller" class="press-btn add-seller-wide">+ Agregar Nuevo Vendedor</button>
					</div>
				</div>
			</div>
			<div id="global-dates-section" class="dates-section">
				<div class="report-card">
					<div class="report-card-content">
						<h3 class="report-title">GestiÃ³n de reportes</h3>
						<p class="report-subtitle">Genera un informe consolidado por fecha</p>
						<button id="report-button" class="press-btn report-btn btn-primary">Ventas</button>
						<button id="transfers-button" class="press-btn report-btn">Transferencias</button>
						<button id="cartera-button" class="press-btn report-btn">Cartera</button>
						<button id="materials-button" class="press-btn report-btn">Materiales</button>
						<button id="users-button" class="press-btn report-btn">Usuarios</button>
					</div>
				</div>
				<input id="report-date" type="date" class="hidden" />
			</div>
		</section>

		<section id="view-sales" class="view hidden">
			<div class="header-sticky">
				<div class="toolbar">
					<div class="toolbar-left">
						<img src="/logo.png" alt="Lulitas Logo" class="app-logo toolbar-logo" />
						<button id="go-home" class="secondary press-btn">Inicio</button>
					</div>
					<h2 id="current-seller"></h2>
					<div class="toolbar-actions">
						<button id="undo-btn" class="secondary press-btn" title="Deshacer" aria-label="Deshacer"></button>
						<button id="redo-btn" class="secondary press-btn" title="Rehacer" aria-label="Rehacer"></button>
						<button id="date-new" class="press-btn btn-primary">+ Nueva Fecha</button>
					</div>
				</div>
			</div>

			<div id="dates-section" class="dates-section">
				<div class="clients-actions"><button id="clients-button" class="press-btn">Clientes</button></div>
				<div class="dates-list" id="dates-list"></div>
				<input id="new-date" type="date" class="hidden" />
			</div>

			<div class="sales-panel">
				<div class="panel-header">
					<h3>Registro de Ventas de Postres</h3>
					<div class="panel-actions">
						<button id="add-row" class="press-btn btn-primary">Nuevo pedido</button>
						<button id="export-excel" class="excel-btn press-btn btn-gold">â¤“ Exportar Excel</button>
					</div>
				</div>
				<div class="panel-body">
					<div class="table-wrapper hidden" id="sales-wrapper">
				<table id="sales-table">
					<caption id="sales-caption"><strong></strong></caption>
					<colgroup>
						<col class="w-paid" />
						<col class="w-client" />
						<col class="w-qty" />
						<col class="w-qty" />
						<col class="w-qty" />
						<col class="w-qty" />
						<col class="w-qty" />
						<col class="w-extra" />
						<col class="w-total" />
						<col class="w-actions" />
					</colgroup>
					<thead>
						<tr>
							<th class="col-paid">$</th>
							<th class="col-client">Cliente</th>
							<th class="col-arco" data-label="Arco"><span class="v-label">Arco</span></th>
							<th class="col-melo" data-label="Melo"><span class="v-label">Melo</span></th>
							<th class="col-mara" data-label="Mara"><span class="v-label">Mara</span></th>
							<th class="col-oreo" data-label="Oreo"><span class="v-label">Oreo</span></th>
							<th class="col-nute" data-label="Nute"><span class="v-label">Nute</span></th>
							<th class="col-extra"></th>
							<th class="col-total">Total</th>
							<th class="col-actions"></th>
						</tr>
					</thead>
					<tbody id="sales-tbody"></tbody>
					<tfoot>
						<tr class="tfoot-qty">
							<td class="col-paid"></td>
							<td class="col-client label">Totales</td>
							<td class="col-arco"><span id="sum-arco-qty">0</span></td>
							<td class="col-melo"><span id="sum-melo-qty">0</span></td>
							<td class="col-mara"><span id="sum-mara-qty">0</span></td>
							<td class="col-oreo"><span id="sum-oreo-qty">0</span></td>
							<td class="col-nute"><span id="sum-nute-qty">0</span></td>
							<td class="col-extra"></td>
							<td class="col-total"><span id="sum-total-qty"> </span></td>
							<td class="col-actions"></td>
						</tr>
						<tr class="tfoot-amt">
							<td class="col-paid"></td>
							<td class="col-client label"></td>
							<td class="col-arco"><span id="sum-arco-amt">0</span></td>
							<td class="col-melo"><span id="sum-melo-amt">0</span></td>
							<td class="col-mara"><span id="sum-mara-amt">0</span></td>
							<td class="col-oreo"><span id="sum-oreo-amt">0</span></td>
							<td class="col-nute"><span id="sum-nute-amt">0</span></td>
							<td class="col-extra"></td>
							<td class="col-total"><span id="sum-grand">0</span></td>
							<td class="col-actions"></td>
						</tr>
						<tr class="tfoot-amt-stack t-am-grand">
							<td class="col-paid"></td>
							<td class="col-client" colspan="7"></td>
							<td class="col-total"><span class="st-amt st-grand" id="sum-grand-2"></span></td>
							<td class="col-actions"></td>
						</tr>
						<tr class="tfoot-comm">
							<td class="col-paid"></td>
							<td class="col-client label">Comisiones</td>
							<td class="col-arco"></td>
							<td class="col-melo"></td>
							<td class="col-mara"></td>
							<td class="col-oreo"></td>
							<td class="col-nute"></td>
							<td class="col-extra"></td>
							<td class="col-total"><span id="sum-comm">0</span></td>
							<td class="col-actions"></td>
						</tr>
						<tr class="tfoot-amt-stack t-am-arco">
							<td class="col-paid"></td>
							<td class="col-client" colspan="8"><span class="st-name">Arco</span> <span class="st-qty" id="sum-arco-qty-2"></span> <span class="st-amt" id="sum-arco-amt-2"></span></td>
							<td class="col-actions"></td>
						</tr>
						<tr class="tfoot-amt-stack t-am-melo">
							<td class="col-paid"></td>
							<td class="col-client" colspan="8"><span class="st-name">Melo</span> <span class="st-qty" id="sum-melo-qty-2"></span> <span class="st-amt" id="sum-melo-amt-2"></span></td>
							<td class="col-actions"></td>
						</tr>
						<tr class="tfoot-amt-stack t-am-mara">
							<td class="col-paid"></td>
							<td class="col-client" colspan="8"><span class="st-name">Mara</span> <span class="st-qty" id="sum-mara-qty-2"></span> <span class="st-amt" id="sum-mara-amt-2"></span></td>
							<td class="col-actions"></td>
						</tr>
						<tr class="tfoot-amt-stack t-am-oreo">
							<td class="col-paid"></td>
							<td class="col-client" colspan="8"><span class="st-name">Oreo</span> <span class="st-qty" id="sum-oreo-qty-2"></span> <span class="st-amt" id="sum-oreo-amt-2"></span></td>
							<td class="col-actions"></td>
						</tr>
						<tr class="tfoot-amt-stack t-am-nute">
							<td class="col-paid"></td>
							<td class="col-client" colspan="8"><span class="st-name">Nute</span> <span class="st-qty" id="sum-nute-qty-2"></span> <span class="st-amt" id="sum-nute-amt-2"></span></td>
							<td class="col-actions"></td>
						</tr>
					</tfoot>
				</table>
				<div class="table-actions end">
					
				</div>
				<div class="table-actions end">
					<button id="add-row-bottom" class="press-btn btn-primary">Nuevo pedido</button>
				</div>
			</div>
		</section>

		<section id="view-ingredients" class="view hidden">
			<div class="header-sticky">
				<div class="toolbar">
					<div class="toolbar-left">
						<img src="/logo.png" alt="Lulitas Logo" class="app-logo toolbar-logo" />
						<button id="ingredients-back" class="secondary press-btn">Volver</button>
					</div>
					<h2>Ingredientes</h2>
					<div class="toolbar-actions">
						<button id="ingredients-add-dessert" class="press-btn btn-primary">+ Postre</button>
						<button id="ingredients-add-extras" class="press-btn">Extras</button>
					</div>
				</div>
			</div>
			<div class="sales-panel">
				<div class="panel-header">
					<h3>Recetas por postre</h3>
				</div>
				<div class="panel-body">
					<div id="ingredients-content"></div>
				</div>
			</div>
		</section>

		<section id="view-clients" class="view hidden">
			<div class="header-sticky">
				<div class="toolbar">
					<div class="toolbar-left">
						<img src="/logo.png" alt="Lulitas Logo" class="app-logo toolbar-logo" />
						<button id="clients-back" class="secondary press-btn">Volver</button>
					</div>
					<h2>Clientes</h2>
					<div class="toolbar-actions"></div>
				</div>
			</div>
			<div class="sales-panel">
				<div class="panel-header">
					<h3>Todos los clientes</h3>
				</div>
				<div class="panel-body">
					<div class="table-wrapper" id="clients-wrapper">
						<table id="clients-table" class="clients-table">
							<thead>
								<tr>
									<th>Cliente</th>
									<th class="col-qty"># Registros</th>
								</tr>
							</thead>
							<tbody id="clients-tbody"></tbody>
						</table>
					</div>
				</div>
			</div>
		</section>

		<section id="view-client-detail" class="view hidden">
			<div class="header-sticky">
				<div class="toolbar">
					<div class="toolbar-left">
						<img src="/logo.png" alt="Lulitas Logo" class="app-logo toolbar-logo" />
						<button id="client-detail-back" class="secondary press-btn">Volver</button>
					</div>
					<h2 id="client-detail-title">Cliente</h2>
				</div>
			</div>
			<div class="sales-panel">
				<div class="panel-header">
					<h3 id="client-detail-subtitle">Historial de compras</h3>
				</div>
				<div class="panel-body">
					<div class="table-wrapper" id="client-detail-wrapper">
						<table id="client-detail-table">
							<thead>
								<tr>
									<th class="col-paid">$</th>
									<th class="col-date">Fecha</th>
									<th class="col-arco">Arco</th>
									<th class="col-melo">Melo</th>
									<th class="col-mara">Mara</th>
									<th class="col-oreo">Oreo</th>
									<th class="col-nute">Nute</th>
									<th class="col-total">Total</th>
								</tr>
							</thead>
							<tbody id="client-detail-tbody"></tbody>
						</table>
					</div>
				</div>
			</div>
		</section>
	</main>

	<footer class="app-footer">
		<small>Datos sincronizados con Netlify + Neon</small>
	</footer>

	<!-- Toast container -->
	<div id="toast-container" aria-live="polite" aria-atomic="true"></div>

	<script src="/app.js" type="module"></script>
</body>
</html>